functions:
  ReportProcessorHandler:
    handler: src.handlers.report_processor.process_file
    environment:
      STAGE: ${self:custom.stage}
      LOG_LEVEL: ${ssm:/${self:custom.stage}/${self:service}/LOG_LEVEL, 'INFO'}
    memorySize: 2048
    timeout: 900
    layers:
      - ${ssm:/${self:custom.stage}/${self:service}/LAYER_ARN}
    events:
      - sqs:
          arn:
            Fn::GetAtt:
              - ETLFileProcessingQueue
              - Arn
